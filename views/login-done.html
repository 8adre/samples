<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Publisher Login Done</title>

    <%> styles %>

</head>
<body>
  <header>
    <div class="brand-logo">
      PublisherLogo
    </div>
  </header>

  <div class=article-body>
    <div class="title">
      Login Successfull
    </div>
    <p>
      Login was successfull. You will be redirected back to AMP Cache.
    </p>

    <p>
      In reality this will be done via server-side
      redirect.
    </p>
  </div>

  <div style="margin-top: 20px;">
    <button id=proceed onclick="proceed()">Proceed</button>
  </div>

  <div id="info"></div>

  <script>
    function proceed() {
      document.getElementById('proceed').disabled = true;
      var returnUrl = parseQueryString(location.search)['return'];
      document.getElementById('info').textContent = 'Redirecting now to ' +
          returnUrl;
      setTimeout(function() {
        location.replace(returnUrl);
      }, 2000);
    }

    function parseQueryString(queryString) {
      var params = {};
      if (!queryString) {
        return params;
      }
      if (queryString.indexOf('?') == 0 || queryString.indexOf('#') == 0) {
        queryString = queryString.substr(1);
      }
      var pairs = queryString.split('&');
      for (var i = 0; i < pairs.length; i++) {
        var pair = pairs[i];
        var eqIndex = pair.indexOf('=');
        var name;
        var value;
        if (eqIndex != -1) {
          name = decodeURIComponent(pair.substring(0, eqIndex)).trim();
          value = decodeURIComponent(pair.substring(eqIndex + 1)).trim();
        } else {
          name = decodeURIComponent(pair).trim();
          value = '';
        }
        if (name) {
          params[name] = value;
        }
      }
      return params;
    }

  </script>

</body>
</html>
