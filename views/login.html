<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Publisher Login</title>
    <%> styles %>
  </head>
  <body>
    <header>
      <div class="brand-logo">
        âš¡ Instant Times
      </div>
    </header>
    <main>
    <div class="title">
      Login
    </div>
    <form method=post action="login-submit">
      <div class=form-line>
        <div class=label>Email:</div>
        <input type=email name=email value="subscriber@example.com">
      </div>
      <div class=form-line>
        <div class=label>Password:</div>
        <input type=password name=password value="123456">
      </div>
      <div class=form-line>
        <input type=submit value=Login>
      </div>
      <input name=returnurl type=hidden>
      <input name=rid type=hidden>
    </form>
    </main>

    <script>
      var queryMap = {};
      var query = window.location.search;
      if (query && query[0] == '?') {
        query = query.substring(1);
      }
      if (query) {
        var params = query.split('&');
        params.forEach(function(param) {
          var eq = param.indexOf('=');
          var name = decodeURIComponent((eq != -1 ? param.substring(0, eq) : param).trim());
          var value = decodeURIComponent((eq != -1 ? param.substring(eq + 1) : '').trim());
          queryMap[name] = value;
        });
      }
      if (queryMap['return']) {
        document.querySelector('[name=returnurl]').value = queryMap['return'];
      }
      if (queryMap['rid']) {
        document.querySelector('[name=rid]').value = queryMap['rid'];
      }
    </script>
  </body>
</html>

